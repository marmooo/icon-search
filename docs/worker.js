function cleanup(a){const c=[],b=[],d=[];[...a.getElementsByTagName("*")].forEach(a=>{for(const[f,e]of Object.entries(a.attributes))f=="id"&&c.push(a),a.tagName=="style"&&d.push(a),e.startsWith("#")&&b.push([a,f,e]),e.includes("url")&&b.push([a,f,e])}),uniqIds(a,c,b),uniqClasses(a,d)}function uniqIds(a,b,c){return b.forEach(b=>{const d=b.id,a="id-"+Math.random().toString(16).slice(2),e=new RegExp(`url\\(#${d}\\)`,"g");b.setAttribute("id",a),c.forEach(([f,b,c])=>{switch(b){case"href":case"xlink:href":c==`#${d}`&&f.setAttribute(b,`#${a}`);break;default:{const d=c.replace(e,`url(#${a})`);c!=d&&f.setAttribute(b,d)}}})}),a}function uniqClasses(a,b){if(b.length>0){const d=new RegExp("(.[^}]+})","g"),c="id-"+Math.random().toString(16).slice(2),e=a.querySelector("svg");e.setAttribute("id",c),b.forEach(a=>{const e=a.textContent,b=styles.replace(d,`#${c} $1`);e!=b&&(a.textContent=b)})}return a}function setPreviewInfo(c,b){const a=c.querySelector("svg");return a.setAttribute("width",b),a.setAttribute("height",b),a.setAttribute("role","button"),a.setAttribute("data-bs-toggle","offcanvas"),a.setAttribute("data-bs-target","#details"),a.setAttribute("aria-controls","details"),a}importScripts("node-html-parser.js"),self.addEventListener("message",b=>{const[c,d,e]=b.data,a=HTMLParser.parse(c);cleanup(a),setPreviewInfo(a,e),postMessage([a.toString(),d])})