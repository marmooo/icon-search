function uniqIds(a){a.querySelectorAll("[id]").forEach(c=>{const d=c.id,b=Math.random().toString(16).slice(2),e=new RegExp(`url\\(#${d}\\);?`,"g");c.id=b,[...a.getElementsByTagName("*")].forEach(a=>{for(const[c,d]of Object.entries(a.attributes))if(c=="xlink:href"&&d.startsWith("#"))a.setAttribute(c,`#${b}`);else{const f=d.replace(e,`url(#${b});`);d!=f&&a.setAttribute(c,f)}})})}importScripts("node-html-parser.js"),self.addEventListener("message",b=>{const a=HTMLParser.parse(b.data);uniqIds(a),postMessage(a.toString())})